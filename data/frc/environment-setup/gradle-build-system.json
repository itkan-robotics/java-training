{
  "title": "Understanding the Gradle Build System",
  "sections": [
    {
      "type": "text",
      "title": "Introduction to Gradle",
      "content": "Gradle is the build automation tool used by WPILib projects. It handles compiling your Java code, managing dependencies, and deploying code to the robot. Understanding Gradle helps you work with vendor libraries, troubleshoot build issues, and customize your build process.<br><br>Learn more: <a href='https://docs.wpilib.org/en/stable/docs/software/getting-started/getting-started-frc-control-system/roborio-introduction.html' target='_blank'>WPILib Documentation: Build System</a>"
    },
    {
      "type": "rules-box",
      "title": "What Gradle Does",
      "subtitle": "Gradle handles:",
      "items": [
        "Compiling Java source code into bytecode",
        "Downloading and managing library dependencies",
        "Packaging code for deployment to roboRIO",
        "Running tests and generating reports",
        "Cleaning build artifacts",
        "Managing vendor library dependencies"
      ]
    },
    {
      "type": "text",
      "title": "Gradle in FRC Projects",
      "content": "Every WPILib project uses Gradle through the Gradle Wrapper. The wrapper ensures everyone on your team uses the same Gradle version, regardless of what's installed on their computer.<br><br><strong>Gradle Wrapper:</strong> The <code>gradlew</code> script (or <code>gradlew.bat</code> on Windows) is the Gradle wrapper. It automatically downloads and uses the correct Gradle version for your project.<br><br><strong>Why Use the Wrapper:</strong> Using <code>./gradlew</code> instead of a system-wide <code>gradle</code> command ensures consistent builds across different computers and team members.<br><br><strong>Wrapper Files:</strong> The wrapper consists of:<br>- <code>gradlew</code> / <code>gradlew.bat</code> - Executable scripts<br>- <code>gradle/wrapper/gradle-wrapper.jar</code> - Wrapper JAR file<br>- <code>gradle/wrapper/gradle-wrapper.properties</code> - Wrapper configuration"
    },
    {
      "type": "text",
      "title": "build.gradle File Structure",
      "content": "The <code>build.gradle</code> file is the main configuration file for your project. It defines plugins, repositories, dependencies, and build settings. Understanding its structure helps when adding vendor libraries or troubleshooting build issues.<br><br>Learn more: <a href='https://docs.wpilib.org/en/stable/docs/software/vscode-overview/3rd-party-libraries.html' target='_blank'>WPILib Documentation: Third-Party Libraries</a>"
    },
    {
      "type": "code",
      "title": "Complete build.gradle Example with Comments",
      "content": "// Plugins section - defines what build capabilities are available\nplugins {\n    id \"java\"                              // Java compilation support\n    id \"edu.wpi.first.GradleRIO\" version \"2024.1.1\"  // WPILib plugin with version\n}\n\n// Repositories - where to download dependencies from\nrepositories {\n    mavenCentral()  // Standard Java libraries (Maven Central)\n    \n    // Vendor-specific repositories\n    maven { url = \"https://maven.phoenixframework.org/\" }  // CTRE Phoenix\n    maven { url = \"https://www.revrobotics.com/content/sw/max/sdk/maven/\" }  // REV Robotics\n}\n\n// Dependencies - libraries your code uses\ndependencies {\n    // WPILib dependencies (automatically configured by GradleRIO plugin)\n    implementation wpi.java.deps.wpilib()      // Core WPILib libraries\n    implementation wpi.java.vendor.java()     // Vendor library support\n    \n    // Example: Adding CTRE Phoenix library\n    // Uncomment and update version as needed:\n    // implementation \"com.ctre.phoenix:api-java:5.30.3\"\n    \n    // Example: Adding REV Robotics Spark MAX library\n    // Uncomment and update version as needed:\n    // implementation \"com.revrobotics.frc:SparkMax-java:1.11.1\"\n}\n\n// WPILib configuration\nwpi {\n    javaVersion = JavaVersion.VERSION_17  // Java version to use\n    \n    // Optional: Configure desktop support for simulation\n    // useDesktop = false\n}"
    },
    {
      "type": "text",
      "title": "Understanding Plugins",
      "content": "Plugins extend Gradle's capabilities. The two essential plugins for FRC projects are:<br><br><strong>Java Plugin:</strong> Provides Java compilation, testing, and packaging capabilities. This is a standard Gradle plugin.<br><br><strong>GradleRIO Plugin:</strong> The WPILib-specific plugin that configures FRC-specific build tasks, dependency management, and deployment. This plugin automatically sets up WPILib dependencies and provides tasks like <code>deploy</code>.<br><br><strong>Plugin Version:</strong> The GradleRIO version (e.g., \"2024.1.1\") determines which WPILib version your project uses. This should match your competition season."
    },
    {
      "type": "text",
      "title": "Repositories Explained",
      "content": "Repositories are locations where Gradle downloads dependencies from. Your <code>build.gradle</code> specifies which repositories to use.<br><br><strong>Maven Central:</strong> The default repository for standard Java libraries. Most Java libraries are available here.<br><br><strong>Vendor Repositories:</strong> Some FRC vendors host their own Maven repositories:<br>- <strong>CTRE:</strong> <code>https://maven.phoenixframework.org/</code><br>- <strong>REV Robotics:</strong> <code>https://www.revrobotics.com/content/sw/max/sdk/maven/</code><br><br><strong>Why Multiple Repositories:</strong> Different libraries may be hosted in different repositories. Gradle searches all specified repositories to find dependencies."
    },
    {
      "type": "text",
      "title": "Managing Dependencies",
      "content": "Dependencies are external libraries your code uses. WPILib projects typically need WPILib libraries and may need vendor libraries for motor controllers and sensors.<br><br><strong>WPILib Dependencies:</strong> The GradleRIO plugin automatically provides WPILib dependencies through helper functions:<br>- <code>wpi.java.deps.wpilib()</code> - Core WPILib libraries<br>- <code>wpi.java.vendor.java()</code> - Vendor library support<br><br><strong>Adding Vendor Dependencies:</strong> To use CTRE or REV libraries, add them to the dependencies section. You'll also need to add the vendor's repository if not already present.<br><br><strong>Vendor Dependencies Folder:</strong> Some vendors provide <code>.json</code> files that go in the <code>vendordeps/</code> folder. These files automatically configure dependencies and repositories."
    },
    {
      "type": "code",
      "title": "Adding CTRE Phoenix Dependency",
      "content": "// In build.gradle, add the CTRE repository (if not already present)\nrepositories {\n    mavenCentral()\n    maven { url = \"https://maven.phoenixframework.org/\" }  // CTRE repository\n}\n\n// Add CTRE dependency\ndependencies {\n    implementation wpi.java.deps.wpilib()\n    implementation wpi.java.vendor.java()\n    \n    // CTRE Phoenix API\n    implementation \"com.ctre.phoenix:api-java:5.30.3\"\n    \n    // Optional: CTRE Phoenix WPILib integration\n    // implementation \"com.ctre.phoenix:wpilib-cpp:5.30.3\"\n}\n\n// Note: Check CTRE documentation for the latest version number"
    },
    {
      "type": "code",
      "title": "Adding REV Robotics Dependency",
      "content": "// In build.gradle, add the REV repository (if not already present)\nrepositories {\n    mavenCentral()\n    maven { url = \"https://www.revrobotics.com/content/sw/max/sdk/maven/\" }  // REV repository\n}\n\n// Add REV dependency\ndependencies {\n    implementation wpi.java.deps.wpilib()\n    implementation wpi.java.vendor.java()\n    \n    // REV Spark MAX library\n    implementation \"com.revrobotics.frc:SparkMax-java:1.11.1\"\n}\n\n// Note: Check REV documentation for the latest version number"
    },
    {
      "type": "text",
      "title": "Using Vendor Dependencies (vendordeps)",
      "content": "Many FRC vendors provide <code>.json</code> files that simplify adding their libraries. These files go in the <code>vendordeps/</code> folder and automatically configure dependencies and repositories.<br><br><strong>Adding a Vendor Dependency File:</strong><br>1. Download the <code>.json</code> file from the vendor's website<br>2. Place it in your project's <code>vendordeps/</code> folder<br>3. Sync your Gradle project (VS Code usually does this automatically)<br><br><strong>Example Vendors with JSON Files:</strong><br>- CTRE Phoenix<br>- REV Robotics<br>- NavX<br>- PathPlanner<br><br><strong>Benefits:</strong> Vendor dependency files automatically configure the correct repository URLs and dependency versions, reducing configuration errors."
    },
    {
      "type": "text",
      "title": "Common Gradle Tasks",
      "content": "Gradle tasks are commands you can run to perform build operations. Here are the most important tasks for FRC development:<br><br><strong>Build Tasks:</strong><br>- <code>./gradlew build</code> - Compiles your project and runs tests<br>- <code>./gradlew compileJava</code> - Compiles Java source code only<br>- <code>./gradlew classes</code> - Compiles classes without running tests<br><br><strong>Deployment Tasks:</strong><br>- <code>./gradlew deploy</code> - Builds and deploys code to robot<br>- <code>./gradlew deploy --offline</code> - Deploys without checking for updates<br><br><strong>Utility Tasks:</strong><br>- <code>./gradlew clean</code> - Removes all build artifacts<br>- <code>./gradlew tasks</code> - Lists all available tasks<br>- <code>./gradlew :dependencies</code> - Shows dependency tree<br>- <code>./gradlew :dependencyInsight --dependency [name]</code> - Analyzes a specific dependency"
    },
    {
      "type": "code",
      "title": "Running Gradle Tasks",
      "content": "// In VS Code terminal or command line:\n\n// Build the project\n./gradlew build\n\n// Deploy to robot\n./gradlew deploy\n\n// Clean build artifacts\n./gradlew clean\n\n// List all available tasks\n./gradlew tasks\n\n// View dependency tree\n./gradlew :dependencies\n\n// On Windows, use:\ngradlew.bat build\ngradlew.bat deploy"
    },
    {
      "type": "text",
      "title": "Understanding Build Output",
      "content": "When you run a Gradle task, it produces output that shows what's happening and any errors that occur.<br><br><strong>Successful Build:</strong> You'll see 'BUILD SUCCESSFUL' at the end, along with a summary of tasks executed.<br><br><strong>Build Errors:</strong> Errors show the file, line number, and description of the problem. Common errors include:<br>- Syntax errors in Java code<br>- Missing dependencies<br>- Incorrect dependency versions<br>- Network issues downloading dependencies<br><br><strong>Reading Error Messages:</strong> Gradle error messages are usually clear about what went wrong. Look for file paths and line numbers to locate the issue in your code."
    },
    {
      "type": "rules-box",
      "title": "Troubleshooting Common Gradle Issues",
      "subtitle": "Solutions for common problems:",
      "items": [
        "<strong>Build Fails with Dependency Error:</strong> Check repositories are correct, verify version numbers",
        "<strong>Network/Download Errors:</strong> Check internet connection, try --refresh-dependencies flag",
        "<strong>Cache Issues:</strong> Run ./gradlew clean and rebuild, clear Gradle cache if needed",
        "<strong>Version Conflicts:</strong> Use ./gradlew :dependencies to see dependency tree",
        "<strong>Gradle Wrapper Issues:</strong> Ensure gradlew is executable (Linux/Mac: chmod +x gradlew)",
        "<strong>Java Version Mismatch:</strong> Verify Java version in build.gradle matches installed JDK",
        "<strong>Build Hangs:</strong> Check for network issues, verify repositories are accessible",
        "<strong>Out of Memory:</strong> Increase Gradle memory allocation in gradle.properties"
      ]
    },
    {
      "type": "text",
      "title": "Gradle Wrapper vs System Gradle",
      "content": "It's important to understand the difference between the Gradle wrapper and a system-wide Gradle installation.<br><br><strong>Gradle Wrapper (<code>./gradlew</code>):</strong><br>- Included with every WPILib project<br>- Uses a specific Gradle version for the project<br>- Ensures consistent builds across team members<br>- Automatically downloads Gradle if needed<br>- <strong>Recommended for FRC projects</strong><br><br><strong>System Gradle (<code>gradle</code> command):</strong><br>- Installed globally on your computer<br>- May be a different version than your project needs<br>- Can cause version conflicts<br>- Not recommended for FRC projects<br><br><strong>Best Practice:</strong> Always use <code>./gradlew</code> (or <code>gradlew.bat</code> on Windows) instead of a system-wide <code>gradle</code> command."
    },
    {
      "type": "text",
      "title": "Build Lifecycle",
      "content": "Understanding the Gradle build lifecycle helps you know what happens when you run build tasks:<br><br><strong>1. Initialization:</strong> Gradle determines which projects to build<br><strong>2. Configuration:</strong> Build scripts are executed and tasks are configured<br><strong>3. Execution:</strong> Tasks are executed in dependency order<br><br><strong>For FRC Projects:</strong><br>When you run <code>./gradlew build</code>:<br>1. Gradle reads <code>build.gradle</code><br>2. Downloads dependencies from repositories<br>3. Compiles Java source code<br>4. Packages compiled code<br>5. Runs tests (if any)<br><br>When you run <code>./gradlew deploy</code>:<br>1. Builds the project (if not already built)<br>2. Connects to robot over network<br>3. Uploads compiled code to roboRIO<br>4. Restarts robot code"
    },
    {
      "type": "text",
      "title": "Custom Gradle Tasks",
      "content": "You can create custom Gradle tasks for project-specific operations. While not commonly needed for basic FRC projects, custom tasks can automate repetitive operations.<br><br><strong>Example Custom Task:</strong> A task to generate documentation or run custom scripts.<br><br><strong>Adding Custom Tasks:</strong> Custom tasks are defined in <code>build.gradle</code> using the <code>task</code> keyword. However, for most FRC projects, the built-in tasks are sufficient."
    },
    {
      "type": "code",
      "title": "Example Custom Task",
      "content": "// Example: Custom task to print project information\ntask printProjectInfo {\n    doLast {\n        println \"Project: ${project.name}\"\n        println \"Version: ${project.version}\"\n        println \"Team Number: ${wpi.teamNumber}\"\n    }\n}\n\n// Run with: ./gradlew printProjectInfo"
    },
    {
      "type": "text",
      "title": "settings.gradle File",
      "content": "The <code>settings.gradle</code> file configures the Gradle project structure. For most FRC projects, this file is simple and rarely needs modification.<br><br><strong>Typical Contents:</strong><br>- Project name<br>- Root project configuration<br><br><strong>When to Modify:</strong> You typically only modify <code>settings.gradle</code> for multi-project builds or advanced configurations. For single-robot projects, the default file works fine."
    },
    {
      "type": "code",
      "title": "Example settings.gradle",
      "content": "rootProject.name = 'Robot2024'  // Your project name\n\n// For most FRC projects, this is all you need"
    },
    {
      "type": "rules-box",
      "title": "Gradle Best Practices",
      "subtitle": "For reliable builds:",
      "items": [
        "Always use the Gradle wrapper (./gradlew) instead of system Gradle",
        "Keep WPILib version in build.gradle updated for your season",
        "Use vendor dependency JSON files when available",
        "Verify dependency versions match vendor documentation",
        "Run ./gradlew clean if experiencing strange build issues",
        "Check build output for warnings and errors",
        "Keep repositories list minimal (only what you need)",
        "Document any custom build configurations",
        "Test builds on multiple team member computers"
      ]
    },
    {
      "type": "link-grid",
      "title": "Related Topics",
      "links": [
        { "label": "Project Creation", "id": "project-creation" },
        { "label": "VS Code Setup", "id": "vs-code-setup" },
        { "label": "CTRE Setup", "id": "ctre-intro" },
        { "label": "REV Setup", "id": "rev-intro" }
      ]
    }
  ]
}

